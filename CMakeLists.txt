cmake_minimum_required(VERSION 3.10)
project(BdUI LANGUAGES "CXX")
include_directories(${PROJECT_SOURCE_DIR}/include)
option("3D" "3D module" ON)
option("Shared" "Compile to Shared lib" OFF)

if(Shared)
set(LIBRARY_OUTPUT_PATH ./bin)
else()
set(LIBRARY_OUTPUT_PATH ./bin/lib)
endif()

file(GLOB_RECURSE SRC ${PROJECT_SOURCE_DIR}/src/*.cpp)

if(Shared)
add_library(${PROJECT_NAME} SHARED ${SRC})
else()
add_library(${PROJECT_NAME} STATIC ${SRC})
endif()
if(WIN32)
target_link_libraries(${PROJECT_NAME} dwmapi)
if(CMAKE_CL_64)
set(FreeImage "${PROJECT_SOURCE_DIR}/lib/FreeImage 3.18/windows/x64")
else()
set(FreeImage "${PROJECT_SOURCE_DIR}/lib/FreeImage 3.18/windows/x32")
endif()
endif()
target_link_libraries(${PROJECT_NAME} opengl32 ${FreeImage}/FreeImage)
add_subdirectory(${PROJECT_SOURCE_DIR}/Test)